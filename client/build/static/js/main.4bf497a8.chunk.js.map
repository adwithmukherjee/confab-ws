{"version":3,"sources":["assets/title.svg","context/UserContext.ts","keys/index.js","api/firebase.js","components/LoggedInPage.jsx","assets/cal-icon2.png","assets/phone-icon.png","pages/HomePage.js","assets/hero-img.png","assets/logo.svg","pages/WaitlistPage.js","components/QRCodeDisplay.tsx","components/MediaPlayer.tsx","components/Participant.tsx","components/Participants.tsx","components/Call.tsx","api/sockets/sockets.js","components/Loading.js","pages/CallPage.tsx","hooks/useAgora.tsx","pages/SignInPage.js","utils/loadGoogleScript.js","utils/loadGapiClient.js","App.tsx","index.js","api/sockets/events.js"],"names":["UserContext","React","createContext","undefined","keys","AGORA_APP_ID","AGORA_SECRET","FIREBASE_CONFIG","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","GAPI_CLIENT","clientId","scope","discoveryDocs","firebase","initializeApp","auth","storage","signInWithGoogle","a","googleAuth","window","gapi","auth2","getAuthInstance","signIn","googleUser","token","getAuthResponse","id_token","credential","GoogleAuthProvider","user","Promise","resolve","reject","setPersistence","Auth","Persistence","LOCAL","then","signInWithCredential","email","firestore","collection","doc","get","data","catch","err","console","log","signOut","LoggedInUI","children","useContext","setUser","useState","anchorEl","setAnchorEl","handleClose","handleLogout","AppBar","position","color","elevation","Toolbar","style","flexDirection","alignItems","IconButton","marginRight","onClick","event","currentTarget","Menu","id","anchorOrigin","vertical","horizontal","getContentAnchorEl","keepMounted","open","Boolean","onClose","MenuItem","useStyles","makeStyles","theme","root","margin","display","alignSelf","justifyContent","title","textAlign","fontSize","isMobile","buttonGroup","marginTop","buttons","width","spacing","height","label","description","paper","borderRadius","modal","top","left","transform","backgroundColor","palette","background","boxShadow","shadows","padding","HomePage","history","useHistory","ConfabTitle","src","titleImg","maxWidth","alt","classes","className","Paper","phoneIcon","cursor","db","currentUser","add","ended","lastActive","Date","creatorRef","docRef","set","isHost","createCall","channel","push","href","target","rel","calIcon","blue","input","marginLeft","flex","iconButton","divider","WaitlistPage","success","setSuccess","setEmail","Typography","variant","fontWeight","Button","fontFamily","ConfabTitleWithTagline","component","borderStyle","borderWidth","InputBase","type","placeholder","value","onChange","e","test","marginBottom","grey","red","heroImg","listStyle","Footer","float","titleStyle","QRCodeDisplay","props","bottom","right","qrCodeDisplayStyle","qrCodeStyle","lineHeight","MediaPlayer","container","useRef","useEffect","isLocal","audioTrack","play","stop","ref","Participant","audio","setAudio","interval","setInterval","isAddParticipant","getVolumeLevel","clearInterval","participant","Math","size","photoURL","muted","mute","displayName","Participants","me","users","gridTemplateColumns","numberOfParticipants","getGridTemplateColumns","meParticipant","length","snackbarOpen","setSnackbarOpen","Alert","filter","map","setSelectedUser","setRemoteOpen","setLocalOpen","el","document","createElement","location","body","appendChild","select","execCommand","removeChild","addParticipantClicked","Snackbar","autoHideDuration","reason","severity","require","AgoraRTC","createClient","codec","mode","participantGroup","flexWrap","overflow","zIndex","editPicture","Call","leaveMeeting","localUser","localAudioTrack","setLocalUser","remoteUsers","calendarEvent","setCalendarEvent","gcal_event","getCalEventDetails","upsellBannerOpen","setUpsellBannerOpen","localOpen","remoteOpen","selectedUser","image","setImage","imageURL","setImageURL","uploadImage","uploadTask","child","put","snapshot","getDownloadURL","url","merge","updateUserPhotoURL","EditorState","createEmpty","editorState","setEditorState","html","profile","content","ContentState","createFromBlockArray","htmlToDraft","contentBlocks","createWithContent","profileHTML","draftToHtml","convertToRaw","getCurrentContent","setMuted","changeMute","message","SnackbarContent","action","paddingLeft","summary","onDismiss","snapPoints","minHeight","maxHeight","scrollLocking","header","htmlFor","accept","border","outline","files","img","URL","createObjectURL","toolbar","options","wrapperStyle","wrapperClassName","editorClassName","onEditorStateChange","edited","disabled","wordBreak","overflowY","dangerouslySetInnerHTML","__html","val","socket","io","Loading","CircularProgress","client","convertFromAgoraUser","CallPage","joinedOnce","setJoinedOnce","setRemoteUsers","playSound","setLocalAudioTrack","joinState","setJoinState","createLocalTracks","audioConfig","createMicrophoneAudioTrack","microphoneTrack","appid","uid","join","publish","close","leave","handleUserPublished","mediaType","subscribe","Array","from","handleUserUnpublished","handleUserJoined","handleUserLeft","on","off","useAgora","audioElement","getElementsByClassName","remoteAgoraUsers","localAudioTrackRef","localUserRef","remoteAgoraUsersRef","current","channelId","useParams","RtcTokenBuilder","buildTokenWithUid","RtcRole","PUBLISHER","floor","now","emit","events","UPDATE_USER","setRemoteUserState","remoteUserList","remoteUser","find","toString","LEAVE_CHANNEL","getReplaced","JOIN_CHANNEL","tmpUser","SignInPage","setLoading","loadGoogleScript","firstJs","getElementsByTagName","getElementById","js","onload","onGoogleScriptLoad","parentNode","insertBefore","loadGapiClient","_gapi","load","init","App","loading","globals","onAuthStateChanged","activeUser","createTheme","typography","ThemeProvider","Provider","exact","path","render","LoggedInPage","to","ReactDOM","StrictMode","module","exports","IS_USER","NEW_USER","INIT_CHATS","LOGOUT","MESSAGE_SEND","TYPING","P_MESSAGE_SEND","P_TYPING","CHECK_CHANNEL","CREATE_CHANNEL"],"mappings":"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","file":"static/js/main.4bf497a8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/title.cc86d25d.svg\";","import React from \"react\";\nimport { UserContextInterface } from \"../App\";\n// Creates and exports a React Context object that is used to store global variables\nconst UserContext = React.createContext<UserContextInterface | undefined>(\n  undefined\n);\n\nexport default UserContext;\n","const keys = {\n  AGORA_APP_ID: \"37819f409bdf4c9f9405b89172a0155e\",\n  AGORA_SECRET: \"e04c71eba3134c46b40389d3f7ea06a9\",\n  //TEMP_TOKEN: '00637819f409bdf4c9f9405b89172a0155eIAA7Sj+VgSgNlc3UtcltTWuGLbdyNxJh1BR+co3qigzBWB2rlmQAAAAAEAAoIaFG1bb0YAEAAQDVtvRg',\n  FIREBASE_CONFIG: {\n    apiKey: \"AIzaSyDXLFXQgYj652rsqduUGKbDyFO_3GvLUMg\",\n    authDomain: \"huddle-7dff8.firebaseapp.com\",\n    projectId: \"huddle-7dff8\",\n    storageBucket: \"huddle-7dff8.appspot.com\",\n    messagingSenderId: \"192926803111\",\n    appId: \"1:192926803111:web:f8bcc3ac3af112f351e782\",\n    measurementId: \"G-YZS5NRQLHW\",\n  },\n  //SENDGRID_API_KEY: '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',\n\n  GAPI_CLIENT: {\n    clientId:\n      \"512932984647-e6k7abdu7lfdaqr0mmpokthiigre935h.apps.googleusercontent.com\",\n    apiKey: \"AIzaSyALTluatJjb31Y5QbWEJSc32R9QV4qP0CA\",\n\n    scope: \"https://www.googleapis.com/auth/userinfo.profile\",\n    //\"ux_mode\": 'redirect',\n\n    discoveryDocs: [\n      \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\",\n    ],\n  },\n};\n\nexport default keys;\n","import firebase from \"firebase/compat/app\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/storage\";\nimport keys from \"../keys\";\n\nfirebase.initializeApp(keys.FIREBASE_CONFIG);\n\nconst auth = firebase.auth();\nconst storage = firebase.storage();\n\nconst getUser = (email) => {\n  const user = new Promise((resolve, reject) => {\n    firebase\n      .firestore()\n      .collection(\"users\")\n      .doc(email)\n      .get()\n      .then((doc) => {\n        resolve({ ...doc.data(), email });\n      })\n      .catch(() => {\n        resolve(undefined);\n      });\n  });\n\n  return user;\n};\n\nconst signInWithGoogle = async () => {\n  const googleAuth = window.gapi.auth2.getAuthInstance();\n  const googleUser = await googleAuth.signIn();\n  const token = googleUser.getAuthResponse().id_token;\n\n  const credential = firebase.auth.GoogleAuthProvider.credential(token);\n\n  const user = new Promise((resolve, reject) => {\n    firebase\n      .auth()\n      .setPersistence(\n        process.env.NODE_ENV === \"production\"\n          ? firebase.auth.Auth.Persistence.LOCAL\n          : firebase.auth.Auth.Persistence.SESSION\n      )\n      .then(() => {\n        firebase\n          .auth()\n          .signInWithCredential(credential)\n          .then(({ user }) => {\n            const { email } = user;\n\n            firebase\n              .firestore()\n              .collection(\"users\")\n              .doc(email)\n              .get()\n              .then((doc) => {\n                resolve({ ...doc.data(), email });\n              });\n          })\n          .catch((err) => {\n            console.log(err);\n            resolve(undefined);\n          });\n      })\n      .catch((err) => {\n        console.log(err);\n        resolve(undefined);\n      });\n  });\n\n  return user;\n};\n\nconst signOut = async () => {\n  await auth.signOut();\n};\n\nconst createCall = () => {\n  const db = firebase.firestore();\n  const { email } = firebase.auth().currentUser;\n\n  const channel = new Promise((resolve, reject) => {\n    db.collection(\"meetings\")\n      .add({\n        ended: false,\n        lastActive: new Date(),\n        creatorRef: db.doc(\"users/\" + email),\n      })\n      .then((docRef) => {\n        db.collection(\"meetings\")\n          .doc(docRef.id)\n          .collection(\"currentAttendees\")\n          .doc(email)\n          .set({\n            isHost: true,\n          })\n          .then(() => {\n            resolve(docRef.id);\n          });\n      })\n      .catch((err) => {\n        reject(err);\n      });\n  });\n\n  return channel;\n};\n\nconst getCalEventDetails = (channel) => {\n  const db = firebase.firestore().collection(\"meetings\");\n\n  const meetingInfo = new Promise((resolve, reject) => {\n    db.doc(channel)\n      .get()\n      .then((doc) => {\n        const { gcal_event } = doc.data();\n        if (gcal_event) {\n          resolve(gcal_event);\n        } else {\n          resolve(undefined);\n        }\n      })\n      .catch(() => {\n        resolve(undefined);\n      });\n  });\n  return meetingInfo;\n};\n\nconst updateUserPhotoURL = (photoURL) => {\n  const db = firebase.firestore();\n  const { email } = firebase.auth().currentUser;\n  if (photoURL && photoURL !== \"\") {\n    db.collection(\"users\").doc(email).set(\n      {\n        photoURL,\n      },\n      { merge: true }\n    );\n  }\n};\n\nexport {\n  auth,\n  storage,\n  getUser,\n  signInWithGoogle,\n  signOut,\n  createCall,\n  getCalEventDetails,\n  updateUserPhotoURL,\n};\n","import { AppBar, Toolbar, IconButton, Menu, MenuItem } from \"@material-ui/core\";\nimport React from \"react\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport { signOut } from \"../api/firebase\";\nimport UserContext from \"../context/UserContext\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction LoggedInUI({ children }) {\n  const { user, setUser } = React.useContext(UserContext);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleReportIssue = () => {\n    handleClose();\n    // use window vs React Router API since this page isn't managed in React\n    window.open(process.env.PUBLIC_URL + \"/contact-us\", \"_blank\");\n  };\n  const handleLogout = async () => {\n    handleClose();\n\n    await signOut();\n    await setUser(undefined);\n    console.log(user);\n  };\n\n  return (\n    <div>\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\n        <Toolbar\n          style={{ flexDirection: \"column-reverse\", alignItems: \"flex-end\" }}\n        >\n          <IconButton style={{ marginRight: \"10px\" }} onClick={handleClick}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu\n            id=\"ellipsis-menu\"\n            anchorEl={anchorEl}\n            anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\n            getContentAnchorEl={null}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            <MenuItem onClick={handleReportIssue}>Contact Us</MenuItem>\n            <MenuItem\n              onClick={() => {\n                handleLogout();\n                handleLogout();\n              }}\n            >\n              Logout\n            </MenuItem>\n          </Menu>\n        </Toolbar>\n      </AppBar>\n      {children}\n    </div>\n  );\n}\n\nexport default LoggedInUI;\n","export default __webpack_public_path__ + \"static/media/cal-icon2.e80483cd.png\";","export default __webpack_public_path__ + \"static/media/phone-icon.c409c032.png\";","import React, { useContext, useEffect, useState } from \"react\";\nimport UserContext from \"../context/UserContext\";\nimport { isMobile } from \"react-device-detect\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport calIcon from \"../assets/cal-icon2.png\";\nimport phoneIcon from \"../assets/phone-icon.png\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport titleImg from \"../assets/title.svg\";\nimport { blue } from \"@material-ui/core/colors\";\nimport { createCall } from \"../api/firebase\";\n\nconst HomePage = () => {\n  const history = useHistory();\n  const [isOpen, setOpen] = useState(false);\n  const [modalText, setModalText] = useState({ title: \"\", description: \"\" });\n\n  function handleCreateRoom() {\n    createCall().then((channel) => {\n      history.push(`/call/${channel}`);\n    });\n  }\n\n  function ConfabTitle({ style }) {\n    /* TODO: why is this h1 not rendering as bold as it should be? issue with font file / font-face? */\n    return (\n      <img\n        src={titleImg}\n        style={{\n          maxWidth: isMobile ? \"80%\" : \"100%\",\n          // transform: isMobile ? \"translate(-10%)\" : \"none\",\n          ...style,\n        }}\n        alt=\"CONFAB\"\n      />\n    );\n  }\n\n  const classes = useStyles();\n\n  return (\n    <div className=\"landing-container-1\">\n      <div className={classes.root}>\n        <ConfabTitle />\n\n        <div className={classes.buttonGroup}>\n          <div className={classes.buttons}>\n            <Paper elevation={0} className={classes.paper}>\n              {/* <AddBoxRoundedIcon\n                style={{ fontSize: \"500%\" }}\n                onClick={handleCreateRoom}\n              /> */}\n              <img\n                src={phoneIcon}\n                alt=\"Create Room\"\n                style={{ width: \"90%\", height: \"90%\", cursor: \"pointer\" }}\n                onClick={handleCreateRoom}\n              />\n            </Paper>\n            <div className={classes.label}> Start Room</div>\n            <div className={classes.description}> </div>\n          </div>\n          <div style={{ width: isMobile ? 20 : 100 }}></div>\n          <div className={classes.buttons}>\n            <Paper elevation={0} className={classes.paper}>\n              <a\n                href=\"https://workspace.google.com/marketplace/app/confab/192926803111\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                }}\n              >\n                <img\n                  src={calIcon}\n                  alt=\"calendar\"\n                  style={{ width: \"80%\", height: \"80%\" }}\n                />\n              </a>\n            </Paper>\n            <div className={classes.label}>Get Calendar Add-on</div>\n            <div className={classes.description}>\n              {\" \"}\n              For easy scheduling straight from{\" \"}\n              <a\n                href=\"http://calendar.google.com\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{ color: blue[600] }}\n              >\n                Google Calendar\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: \"auto\",\n    display: \"flex\",\n    alignSelf: \"flex-start\",\n    //alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    //: \"solid\",\n  },\n  title: {\n    textAlign: \"center\",\n    fontSize: isMobile ? \"7vh\" : \"10vh\",\n  },\n  buttonGroup: {\n    marginTop: 100,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    //border: \"solid\",\n  },\n  buttons: {\n    flexDirection: \"column\",\n    width: isMobile ? \"100%\" : \"50%\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    display: \"flex\",\n    \"& > *\": {\n      margin: theme.spacing(2),\n      width: theme.spacing(14),\n      height: theme.spacing(14),\n    },\n  },\n  label: {\n    height: \"1.4vh\",\n    fontSize: \"2vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    display: \"flex\",\n    textAlign: \"center\",\n    width: \"90%\",\n  },\n  description: {\n    height: \"2vh\",\n    fontSize: \"1.3vh\",\n    textAlign: \"center\",\n    width: \"80%\",\n    marginTop: \"-0.2vh\",\n  },\n  paper: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 20,\n  },\n  modal: {\n    position: \"absolute\",\n    width: isMobile ? \"70%\" : \"50%\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: `translate(-50%, -50%)`,\n    backgroundColor: theme.palette.background.paper,\n    //border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default HomePage;\n","export default __webpack_public_path__ + \"static/media/hero-img.6a434e4c.png\";","export default __webpack_public_path__ + \"static/media/logo.3bb3b6b6.svg\";","import {\n  AppBar,\n  Button,\n  IconButton,\n  InputBase,\n  makeStyles,\n  Paper,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport { blue, red } from \"@material-ui/core/colors\";\nimport grey from \"@material-ui/core/colors/grey\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport React, { useState } from \"react\";\nimport { isMobile } from \"react-device-detect\";\nimport titleImg from \"../assets/title.svg\";\nimport logo from \"../assets/logo.svg\";\nimport heroImg from \"../assets/hero-img.png\";\n// import { addToWaitlist } from \"../firebase\";\n\nconst WaitlistPage = () => {\n  const [success, setSuccess] = useState(undefined);\n  const [email, setEmail] = useState(\"\");\n  const handleChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const classes = useStyles();\n\n  const handleSubmitWaitlist = () => {\n    let re =\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if (re.test(email)) {\n      // addToWaitlist(email).then((val) => {\n      setSuccess(true);\n      // });\n    } else {\n      setSuccess(false);\n    }\n  };\n  // console.log(isMobile);\n\n  return (\n    <div className=\"landing-container-1\">\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\n        <Toolbar\n          style={{ flexDirection: \"column-reverse\", alignItems: \"flex-end\" }}\n        >\n          <Typography\n            variant=\"h6\"\n            style={{\n              fontWeight: \"lighter\",\n            }}\n          >\n            <a href=\"/contact-us\" target=\"_blank\">\n              <Button\n                style={{\n                  fontFamily: '\"Noto Sans\", sans-serif',\n                  fontWeight: \"100\",\n                }}\n              >\n                Contact us\n              </Button>\n            </a>{\" \"}\n            |{\" \"}\n            <Button\n              style={{\n                fontFamily: '\"Noto Sans\", sans-serif',\n                fontWeight: \"100\",\n              }}\n              href=\"/login\"\n              target=\"_blank\"\n            >\n              Log in\n            </Button>\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div\n        className=\"landing-container-2\"\n        style={{ height: isMobile ? \"70%\" : \"50%\" }}\n      >\n        <ConfabTitleWithTagline />\n\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"column\",\n            maxWidth: isMobile ? \"90vw\" : \"50vw\",\n          }}\n        >\n          <Paper\n            component=\"form\"\n            className={classes.root}\n            style={{\n              //width: isMobile ? \"60%\" : \"100%\",\n              borderStyle: \"solid\",\n              borderWidth: 0.2,\n            }}\n          >\n            <InputBase\n              type=\"email\"\n              className={classes.input}\n              placeholder=\"Enter your work email...\"\n              value={email}\n              onChange={handleChange}\n            />\n          </Paper>\n          <Paper style={{ backgroundColor: blue[600], marginLeft: \"0.5vw\" }}>\n            <IconButton\n              color=\"primary\"\n              className={classes.iconButton}\n              onClick={handleSubmitWaitlist}\n            >\n              <NavigateNextIcon />\n            </IconButton>\n          </Paper>\n        </div>\n        <Typography\n          variant=\"h5\"\n          style={{ marginTop: \"2vh\", marginBottom: \"1vh\" }}\n        >\n          OR\n        </Typography>\n        <div\n          style={{\n            display: \"flex\",\n            // alignItems: \"column\",\n            width: isMobile ? \"85vw\" : \"50vw\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            textAlign: isMobile ? \"left\" : \"center\",\n            // border: \"solid\",\n            padding: 4,\n            // margin: \"auto\",\n          }}\n        >\n          Skip the waitlist by getting the Google Calendar Add-on\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            style={{\n              marginLeft: 15,\n              borderRadius: 2,\n              backgroundColor: blue[600],\n              padding: \"0.5em\",\n            }}\n            href=\"https://workspace.google.com/marketplace/app/confab/192926803111\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            Skip {!isMobile && \"Waitlist\"}\n          </Button>\n        </div>\n        {/* <Divider className={classes.divider} orientation=\"vertical\" /> */}\n\n        {success ? (\n          <Typography\n            variant=\"body1\"\n            style={{ color: blue[600], marginTop: \"1em\", textAlign: \"center\" }}\n          >\n            You're on the list!\n          </Typography>\n        ) : success === undefined ? (\n          <Typography\n            variant=\"body1\"\n            style={{ color: grey[600], marginTop: \"1em\", textAlign: \"center\" }}\n          ></Typography>\n        ) : (\n          <Typography\n            variant=\"body1\"\n            style={{ color: red[600], marginTop: \"1em\", textAlign: \"center\" }}\n          >\n            Please enter a valid email address.\n          </Typography>\n        )}\n      </div>\n      <img\n        src={heroImg}\n        alt=\"Confab screenshots\"\n        style={{\n          maxWidth: isMobile ? \"95%\" : \"60%\",\n          marginTop: isMobile ? 0 : \"2vh\",\n          marginBottom: \"40px\",\n        }}\n      />\n      <Typography variant=\"body1\">\n        <ul\n          className=\"branding\"\n          style={{\n            maxWidth: isMobile ? \"90%\" : \"65%\",\n            fontSize: isMobile ? \"1vh+1vw\" : \"1vh+1vw\",\n            margin: \"auto\",\n            listStyle: \"none\",\n          }}\n        >\n          <li className={`custom-list audio`}>\n            With Confab's drop-in audio conferencing, it's now easier than ever\n            to have productive, efficient, and focused meetings\n          </li>\n          <li className={`custom-list cal`}>\n            Schedule rooms directly from Google Calendar with the{\" \"}\n            <a\n              href=\"https://workspace.google.com/marketplace/app/confab/192926803111\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              style={{ color: blue[700] }}\n            >\n              Confab Workspace add-on\n            </a>{\" \"}\n            and join on your desktop or mobile browser\n          </li>\n          <li className={`custom-list mirror`}>\n            Never worry about how you look or where you are when joining a\n            meeting\n          </li>\n          <li className={`custom-list person`}>\n            Confab is designed to give you the mobility and flexibility you need\n            for hybrid work\n          </li>\n        </ul>\n      </Typography>\n\n      <Footer />\n    </div>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: 400,\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n    color: \"white\",\n  },\n  divider: {\n    height: 28,\n    margin: 4,\n  },\n}));\nexport default WaitlistPage;\n\nexport function Footer({ style }) {\n  return (\n    <footer\n      style={{\n        alignSelf: \"stretch\",\n        width: \"97%\",\n        margin: \"auto\",\n        marginTop: \"5em\",\n        marginBottom: \"1.5vh\",\n\n        color: grey[500],\n        fontSize: 12,\n        ...style,\n      }}\n    >\n      &copy; 2021 Big Mess Labs Inc. {isMobile && <br />} All Rights Reserved\n      <span\n        style={{\n          float: \"right\",\n          //paddingRight: \"40px\",\n          color: grey[500],\n        }}\n      >\n        <a\n          href=\"/terms-of-service.html\"\n          style={{ marginRight: isMobile ? \"2vw\" : \"5vw\", color: grey[500] }}\n          target=\"_blank\"\n        >\n          Terms\n        </a>\n        <a\n          href=\"/privacy-policy.html\"\n          style={{ marginRight: isMobile ? \"2vw\" : \"4vw\", color: grey[500] }}\n          target=\"_blank\"\n        >\n          Privacy\n        </a>\n        <a\n          href=\"/contact-us\"\n          style={{ marginRight: \"2vw\", color: grey[500] }}\n          target=\"_blank\"\n        >\n          Contact Us\n        </a>\n      </span>\n    </footer>\n  );\n}\n\nfunction ConfabTitle({ style }) {\n  /* TODO: why is this h1 not rendering as bold as it should be? issue with font file / font-face? */\n  return (\n    <img\n      src={titleImg}\n      style={{\n        maxWidth: isMobile ? \"100%\" : \"100%\",\n        margin: \"auto\",\n        //transform: isMobile ? \"translate(-10%)\" : \"none\",\n        ...style,\n      }}\n      alt=\"CONFAB\"\n    />\n  );\n}\n\nexport function ConfabTitleWithTagline({ titleStyle }) {\n  return (\n    <Typography\n      variant=\"h1\"\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      <ConfabTitle style={titleStyle} />\n      <Typography\n        variant=\"h5\"\n        style={{\n          fontWeight: \"bold\",\n          marginTop: \"-1vh\",\n          marginBottom: \"2em\",\n          textAlign: \"center\",\n          fontSize: isMobile ? 15 : 25,\n        }}\n      >\n        Work at the speed of sound\n      </Typography>\n    </Typography>\n  );\n}\n","import isMobile from \"react-device-detect\";\nimport { Paper } from \"@material-ui/core\";\nimport QRCode from \"qrcode.react\";\nimport { useStyles } from \"./Call\";\n\ninterface QRCodeDisplayProps {\n  channel: string;\n}\n\nconst QRCodeDisplay = (props: QRCodeDisplayProps) => {\n  const classes = useStyles();\n  if (isMobile) {\n    return <div />;\n  } else {\n    return (\n      <div style={{ position: \"fixed\", bottom: 0, right: 0 }}>\n        <div className={classes.qrCodeDisplayStyle}>\n          <Paper elevation={3} className={classes.qrCodeStyle}>\n            <QRCode\n              style={{ width: \"100%\", height: \"100%\" }}\n              value={`https://immense-beach-14785.herokuapp.com/call/${props.channel}`}\n            />\n          </Paper>\n          <div\n            style={{\n              width: 250,\n              lineHeight: \"20px\",\n              textAlign: \"center\",\n              fontSize: \"13px\",\n            }}\n          >\n            Point your camera at the QR code to join this room on your phone.\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default QRCodeDisplay;\n","import {\n  ILocalVideoTrack,\n  IRemoteVideoTrack,\n  ILocalAudioTrack,\n  IRemoteAudioTrack,\n} from \"agora-rtc-sdk-ng\";\nimport React, { useRef, useEffect } from \"react\";\n\nexport interface VideoPlayerProps {\n  //videoTrack: ILocalVideoTrack | IRemoteVideoTrack | undefined;\n  audioTrack: ILocalAudioTrack | IRemoteAudioTrack | undefined;\n  isLocal: boolean;\n}\n\nconst MediaPlayer = (props: VideoPlayerProps) => {\n  const container = useRef<HTMLDivElement>(null);\n  //   useEffect(() => {\n  //     if (!container.current) return;\n  //     props.videoTrack?.play(container.current);\n  //     return () => {\n  //       props.videoTrack?.stop();\n  //     };\n  //   }, [container, props.videoTrack]);\n  useEffect(() => {\n    if (!props.isLocal) {\n      console.log(\"refreshed?\");\n      props.audioTrack?.play();\n    }\n\n    return () => {\n      props.audioTrack?.stop();\n    };\n  }, [props.audioTrack, props.isLocal]);\n  return (\n    <div\n      ref={container}\n      className=\"video-player\"\n      style={{ width: \"0px\", height: \"0px\" }}\n    ></div>\n  );\n};\n\nexport default MediaPlayer;\n","import { useEffect, useState, MouseEventHandler } from \"react\";\nimport { AgoraUserObject } from \"./Call\";\nimport { useStyles } from \"./Call\";\nimport { Paper } from \"@material-ui/core\";\nimport { isMobile } from \"react-device-detect\";\nimport shadows from \"@material-ui/core/styles/shadows\";\nimport {\n  AiOutlinePlusCircle,\n  AiOutlineAudioMuted,\n  AiOutlineConsoleSql,\n} from \"react-icons/ai\";\nimport MediaPlayer from \"./MediaPlayer\";\n\nexport interface ParticipantProps {\n  // channel: String;\n  // uid: String | undefined;\n  // remoteUsers: any;\n  user: AgoraUserObject | undefined;\n  onClick: MouseEventHandler<HTMLImageElement>;\n  isLocal: boolean;\n  isAddParticipant: boolean;\n}\n\nconst Participant = (props: ParticipantProps) => {\n  // interface ParticipantObject {\n  //   email: String;\n  //   photoURL: string;\n  //   profile: String;\n  //   displayName: string | undefined;\n  // }\n  // const [participant, setParticipant] = useState<\n  //   UserObject | undefined\n  // >();\n  const [audio, setAudio] = useState<number>(0);\n\n  // console.log(props.user?.user.email);\n  // console.log(props.user?.audioTrack);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // console.log(props.user);\n      if (props.user?.audioTrack && !props.isAddParticipant) {\n        //console.log(props.user?.audioTrack.getVolumeLevel());\n        setAudio(props.user?.audioTrack.getVolumeLevel());\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  }, [props.isAddParticipant, props.user?.audioTrack]);\n\n  const classes = useStyles();\n\n  return props.user && props.user.user ? (\n    <div className={classes.participant} onClick={props.onClick}>\n      <Paper\n        elevation={3}\n        className={classes.paper}\n        style={{\n          borderRadius: isMobile ? 35 : 50,\n          boxShadow: props.isAddParticipant\n            ? shadows[3]\n            : audio > 0.02\n            ? `0 0 9pt ${\n                -2 + 3.5 * Math.log(13 * audio + 0.6)\n              }pt cornflowerblue`\n            : shadows[3],\n        }}\n      >\n        {props.isAddParticipant ? (\n          <div\n            style={{\n              backgroundColor: \"#CDCDCD\",\n              width: \"100%\",\n              height: \"100%\",\n              borderRadius: isMobile ? 35 : 50,\n            }}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: isMobile ? 80 : 112,\n              }}\n            >\n              <AiOutlinePlusCircle color=\"white\" size={60} />\n            </div>\n          </div>\n        ) : (\n          <img\n            src={props.user.user.photoURL}\n            alt=\"\"\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n              borderRadius: isMobile ? 35 : 50,\n            }}\n          ></img>\n        )}\n        {props.user.muted && !props.isAddParticipant && (\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: 0,\n              right: 0,\n              display: \"flex\",\n              width: 30,\n              height: 30,\n              borderRadius: \"50%\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <div className={classes.mute}>\n              <AiOutlineAudioMuted />\n            </div>\n          </div>\n        )}\n      </Paper>\n      {!props.isAddParticipant && (\n        <div className={classes.label}>\n          {props.user.user.displayName + (props.user.isHost ? \" (Host)\" : \"\")}\n        </div>\n      )}\n      <MediaPlayer\n        audioTrack={props.user.audioTrack}\n        isLocal={props.isLocal}\n      ></MediaPlayer>\n    </div>\n  ) : null;\n};\n\nexport default Participant;\n","import React from \"react\";\nimport Participant from \"./Participant\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport { useStyles } from \"./Call\";\nimport { AgoraUserObject } from \"./Call\";\nimport { Snackbar } from \"@material-ui/core\";\n\nexport interface ParticipantsProps {\n  me: AgoraUserObject | undefined;\n  users: AgoraUserObject[] | undefined;\n  setLocalOpen: (val: boolean) => void;\n  setRemoteOpen: (val: boolean) => void;\n  setSelectedUser: (user: AgoraUserObject | undefined) => void;\n}\n\nconst getGridTemplateColumns = (numberOfParticipants: number): string => {\n  if (numberOfParticipants === 1) {\n    return \"1fr\";\n  } else if (numberOfParticipants === 2) {\n    return \"1fr 1fr\";\n  } else {\n    return \"1fr 1fr 1fr\";\n  }\n};\n\nconst Participants = (props: ParticipantsProps) => {\n  const me = props.me;\n  const users = props.users;\n\n  // console.log(me);\n  // console.log(users);\n  const classes = useStyles();\n  const meParticipant = 1;\n  const addParticipant = 1;\n  const numberOfParticipants =\n    meParticipant + addParticipant + (users?.length ?? 0);\n  const gridTemplateColumns = getGridTemplateColumns(numberOfParticipants);\n\n  const [snackbarOpen, setSnackbarOpen] = React.useState(false);\n\n  const addParticipantClicked = () => {\n    const el = document.createElement(\"input\");\n    el.value = window.location.href;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n    setSnackbarOpen(true);\n  };\n\n  const handleClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setSnackbarOpen(false);\n  };\n\n  const Alert = (props: any) => (\n    <MuiAlert elevation={6} variant=\"filled\" {...props} />\n  );\n\n  return (\n    <div\n      style={{\n        display: \"grid\",\n        gridTemplateColumns: gridTemplateColumns,\n      }}\n    >\n      {users &&\n        users\n          .filter((user: AgoraUserObject | undefined) => {\n            return user?.isHost;\n          })\n          .map((user: AgoraUserObject | undefined) => {\n            return (\n              <Participant\n                user={user}\n                onClick={() => {\n                  props.setSelectedUser(user);\n                  props.setRemoteOpen(true);\n                }}\n                isLocal={false}\n                isAddParticipant={false}\n              />\n            );\n          })}\n      <Participant\n        user={me}\n        onClick={() => {\n          //props.setSelectedUser(me);\n          props.setLocalOpen(true);\n        }}\n        isLocal={true}\n        isAddParticipant={false}\n      />\n\n      {users &&\n        users.map((user: AgoraUserObject | undefined) => {\n          if (user && !user.isHost) {\n            return (\n              <Participant\n                user={user}\n                onClick={() => {\n                  props.setSelectedUser(user);\n                  props.setRemoteOpen(true);\n                }}\n                isLocal={false}\n                isAddParticipant={false}\n              />\n            );\n          } else {\n            return null;\n          }\n        })}\n      <Participant\n        user={me}\n        onClick={() => {\n          addParticipantClicked();\n        }}\n        isLocal={true}\n        isAddParticipant={true}\n      />\n      <Snackbar\n        open={snackbarOpen}\n        autoHideDuration={4000}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\",\n        }}\n      >\n        <Alert severity=\"success\">Room Link Copied</Alert>\n      </Snackbar>\n    </div>\n  );\n};\n\nexport default Participants;\n","import React, {\n  useState,\n  useEffect,\n  useContext,\n  MouseEventHandler,\n  useRef,\n} from \"react\";\nimport AgoraRTC, {\n  IAgoraRTCRemoteUser,\n  ILocalAudioTrack,\n  IRemoteAudioTrack,\n} from \"agora-rtc-sdk-ng\";\nimport UserContext from \"../context/UserContext\";\nimport useAgora from \"../hooks/useAgora\";\nimport MediaPlayer from \"./MediaPlayer\";\nimport QRCodeDisplay from \"./QRCodeDisplay\";\nimport { isMobile } from \"react-device-detect\";\nimport { useParams, useHistory, Prompt } from \"react-router-dom\";\nimport { RtmTokenBuilder, RtcRole, RtcTokenBuilder } from \"agora-access-token\";\nimport keys from \"../keys\";\nimport { socket } from \"../api/sockets/sockets\";\nimport events from \"../api/sockets/events\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport QRCode from \"qrcode.react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport {\n  CircularProgress,\n  IconButton,\n  SnackbarContent,\n} from \"@material-ui/core\";\nimport {\n  AiOutlineAudioMuted,\n  AiFillCamera,\n  AiOutlinePlusCircle,\n} from \"react-icons/ai\";\nimport { BottomSheet } from \"react-spring-bottom-sheet\";\nimport \"./bottomsheetStyle.css\";\nimport {\n  EditorState,\n  convertToRaw,\n  convertFromRaw,\n  ContentState,\n} from \"draft-js\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport draftToHtml from \"draftjs-to-html\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport htmlToDraft from \"html-to-draftjs\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport Participants from \"./Participants\";\nimport shadows from \"@material-ui/core/styles/shadows\";\nimport { blue } from \"@material-ui/core/colors\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport EventIcon from \"@material-ui/icons/Event\";\nimport {\n  auth,\n  getCalEventDetails,\n  storage,\n  updateUserPhotoURL,\n} from \"../api/firebase\";\nimport { ConfabTitleWithTagline } from \"../pages/WaitlistPage\";\nconst titleImg = require(\"../assets/title.svg\");\n\nconst client = AgoraRTC.createClient({ codec: \"h264\", mode: \"rtc\" });\n\nexport interface UserObject {\n  isHost: boolean;\n  muted: boolean;\n  uid: string | undefined;\n  user: {\n    displayName: string;\n    email: string;\n    photoURL: string;\n    profile: string;\n  };\n}\n\nexport interface AgoraUserObject {\n  isHost: boolean;\n  muted: boolean;\n  uid: string | undefined;\n  audioTrack: ILocalAudioTrack | IRemoteAudioTrack | undefined;\n  user: {\n    displayName: string;\n    email: string;\n    photoURL: string;\n    profile: string;\n  };\n}\n\ninterface CallProps {\n  channel: string;\n  localUser: AgoraUserObject;\n  localAudioTrack: ILocalAudioTrack | undefined;\n  remoteUsers: AgoraUserObject[];\n  leaveMeeting: () => void;\n  setLocalUser: Function;\n}\nfunction convertFromAgoraUser(user: AgoraUserObject): UserObject {\n  delete user.audioTrack;\n  return user;\n}\n////////////\n\nconst Call = (props: CallProps) => {\n  const {\n    channel,\n    leaveMeeting,\n    localUser,\n    localAudioTrack,\n    setLocalUser,\n    remoteUsers,\n  } = props;\n\n  const playSound = () => {\n    const audioElement = document.getElementsByClassName(\n      \"audio\"\n    )[0] as HTMLAudioElement;\n    if (audioElement) {\n      audioElement.play();\n    }\n  };\n\n  ////////////// CAL EVENT PULL ///////////\n\n  const [calendarEvent, setCalendarEvent] = useState<any>(undefined);\n  useEffect(() => {\n    getCalEventDetails().then((event) => {\n      console.log(event);\n      if (event) {\n        setCalendarEvent(event);\n      }\n      /*TODO: ASSIGN HOST HERE*/\n    });\n  }, []);\n\n  ///////////////////////////////////\n  /////////// UI STUFF //////////////\n  //////////////////////////////////\n\n  const classes = useStyles();\n\n  //upsell banner\n\n  const [upsellBannerOpen, setUpsellBannerOpen] = useState(true);\n  const handleCloseUpsellSnackbar = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setUpsellBannerOpen(false);\n  };\n\n  //title\n\n  function ConfabTitle({}) {\n    /* TODO: why is this h1 not rendering as bold as it should be? issue with font file / font-face? */\n    return (\n      <img\n        src={titleImg}\n        style={{\n          maxWidth: isMobile ? \"80%\" : \"100%\",\n        }}\n        alt=\"CONFAB\"\n      />\n    );\n  }\n\n  //bottom sheet\n  const [localOpen, setLocalOpen] = useState(false);\n  const [remoteOpen, setRemoteOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<\n    AgoraUserObject | undefined\n  >();\n\n  //image upload\n\n  const [image, setImage] = useState<Blob | undefined>(undefined);\n  const [imageURL, setImageURL] = useState(localUser.user.photoURL);\n\n  const onImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      setImage(img);\n      setImageURL(URL.createObjectURL(img));\n    }\n  };\n\n  const uploadImage = () => {\n    if (auth.currentUser && image) {\n      console.log(\"uploading\");\n\n      const uploadTask = storage\n        .ref()\n        .child(\"users/\" + auth.currentUser.email)\n        .put(image);\n\n      uploadTask.then(() => {\n        console.log(\"success\");\n        uploadTask.snapshot.ref.getDownloadURL().then((url: string) => {\n          setLocalUser((localUser: AgoraUserObject | undefined) => {\n            if (localUser) {\n              const { photoURL, ...user } = localUser?.user;\n              return { ...localUser, user: { ...user, photoURL: url } };\n            }\n          });\n          updateUserPhotoURL(url);\n          console.log(\"uploaded\");\n        });\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (image) {\n      uploadImage();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [image]);\n\n  //////NOTEPAD//////\n\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n\n  useEffect(() => {\n    const html = localUser.user.profile;\n    const content = ContentState.createFromBlockArray(\n      htmlToDraft(html).contentBlocks\n    );\n    setEditorState(EditorState.createWithContent(content));\n  }, []);\n\n  useEffect(() => {\n    //get profile for first time on load\n    const profileHTML = draftToHtml(\n      convertToRaw(editorState.getCurrentContent())\n    );\n\n    setLocalUser((localUser: AgoraUserObject | undefined) => {\n      if (localUser) {\n        const { profile, ...user } = localUser?.user;\n        return { ...localUser, user: { ...user, profile: profileHTML } };\n      }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editorState]);\n\n  /////MUTE/////\n  const handleMute = () => {\n    setLocalUser((localUser: AgoraUserObject | undefined) => {\n      if (localUser) {\n        const { muted } = localUser;\n        return { ...localUser, muted: !muted };\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (localUser) {\n      const changeMute = async () => {\n        await localAudioTrack?.setMuted(localUser.muted);\n        //console.log(\"mute changed\")\n      };\n      changeMute();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [localUser?.muted, localAudioTrack]);\n\n  return localUser ? (\n    <div>\n      <audio className=\"audio\" style={{ height: 0, width: 0 }}>\n        <source src=\"https://firebasestorage.googleapis.com/v0/b/huddle-7dff8.appspot.com/o/cork.mp3?alt=media&token=a80a2ddc-8e85-41f8-b38c-8df04d2f7289\" />\n      </audio>\n      <div className=\"landing-container-1\">\n        <div className={classes.root}>\n          {!isMobile && (\n            <Snackbar\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"left\",\n              }}\n              message=\"ass\"\n              color=\"blue\"\n              open={upsellBannerOpen}\n              style={{ padding: 0 }}\n              onClose={handleCloseUpsellSnackbar}\n            >\n              <SnackbarContent\n                style={{\n                  backgroundColor: \"rgba(66,133,244,0.2)\",\n                  color: blue[800],\n                  padding: 0,\n                }}\n                action={\n                  <div\n                    style={{\n                      //maxWidth: \"23vw\",\n                      maxWidth: \"25vw\",\n                      display: \"flex\",\n                      marginLeft: \"-1vw\",\n                      alignItems: \"center\",\n\n                      padding: 10,\n                      paddingLeft: 15,\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    <EventIcon style={{ marginRight: 15, color: blue[900] }} />\n                    <a\n                      href=\"https://workspace.google.com/marketplace/app/confab/192926803111\"\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                      style={{ color: blue[800] }}\n                    >\n                      Get the Confab Calendar Add-on to schedule rooms directly\n                      from Google Calendar!\n                    </a>\n                    <IconButton\n                      color=\"primary\"\n                      onClick={() => {\n                        setUpsellBannerOpen(false);\n                      }}\n                    >\n                      <CancelIcon />\n                    </IconButton>\n                  </div>\n                }\n              ></SnackbarContent>\n            </Snackbar>\n          )}\n          <ConfabTitleWithTagline titleStyle={{}} />\n          <div\n            style={\n              {\n                //position: \"fixed\",\n                //top: isMobile ? 100 : 200,\n              }\n            }\n          >\n            {calendarEvent && (\n              <h3 style={{ textAlign: \"center\" }}>{calendarEvent?.summary}</h3>\n            )}\n          </div>\n          <BottomSheet\n            open={localOpen}\n            onDismiss={() => setLocalOpen(false)}\n            snapPoints={({ minHeight, maxHeight }) => [minHeight, maxHeight]}\n            scrollLocking={false}\n            header={\n              <div\n                style={{\n                  flexDirection: \"row\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <div\n                  style={{\n                    flexDirection: \"column\",\n                    display: \"flex\",\n                    alignSelf: \"center\",\n                    alignItems: \"flex-start\",\n                    marginLeft: 20,\n                  }}\n                >\n                  <div\n                    style={{\n                      fontSize: \"25px\",\n                      lineHeight: \"40px\",\n                    }}\n                  >\n                    My Notepad\n                  </div>\n                  {localUser && <div>{localUser.user.email}</div>}\n                </div>\n                <div style={{ display: \"flex\" }}>\n                  <Paper\n                    elevation={0}\n                    className={classes.paper}\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      borderRadius: 22,\n                      marginRight: 20,\n                      boxShadow: \"none\",\n                    }}\n                  >\n                    <label htmlFor=\"single\">\n                      <img\n                        src={imageURL}\n                        alt=\"\"\n                        style={{\n                          width: \"50px\",\n                          height: \"50px\",\n                          borderRadius: 22,\n                        }}\n                      ></img>\n                    </label>\n                    <input\n                      type=\"file\"\n                      id=\"single\"\n                      accept=\"image/*\"\n                      style={{\n                        width: 0,\n                        height: 0,\n                        position: \"absolute\",\n                        borderWidth: 0,\n                        border: \"none\",\n                        outline: 0,\n                      }}\n                      onChange={onImageChange}\n                    />\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        bottom: 0,\n                        right: 0,\n                        display: \"flex\",\n                        width: 20,\n                        height: 20,\n                        borderRadius: \"50%\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                      }}\n                    >\n                      <div className={classes.editPicture}>\n                        <AiFillCamera />\n                      </div>\n                    </div>\n                  </Paper>\n                </div>\n              </div>\n            }\n          >\n            {/* <textarea\n                className=\"prof-description\"\n                style={{\n                  height: \"30vh\",\n                  margin: 20,\n                  fontSize: \"22px\",\n                  width: \"-webkit-fill-available\",\n                  color: \"rgb(40,40,40)\",\n                  wordBreak: \"break-word\",\n                  overflowY: \"auto\",\n                }}\n                placeholder=\"Add publicly visible comments, links, questions, and more here...\"\n                value={notes}\n                onChange={updateProfileField}\n              ></textarea> */}\n            <div\n              style={{\n                width: \"90%\",\n                height: \"100%\",\n                margin: \"auto\",\n              }}\n            >\n              <Editor\n                toolbar={{ options: [\"link\", \"emoji\"] }}\n                editorState={editorState}\n                wrapperStyle={{ height: \"50vh\" }}\n                //editorStyle={{ height: \"100%\", border: \"solid\" }}\n                placeholder=\"Add publicly visible comments, links, questions, and more here...\"\n                wrapperClassName=\"wrapper-class\"\n                editorClassName=\"editor-class\"\n                onEditorStateChange={(edited) => {\n                  setEditorState(edited);\n                  // updateProfileField(\n                  //   draftToHtml(convertToRaw(edited.getCurrentContent()))\n                  // );\n                  // console.log(\n                  //   draftToHtml(convertToRaw(editorState.getCurrentContent()))\n                  // );\n                }}\n              >\n                <textarea\n                  disabled\n                  style={{\n                    height: \"30vh\",\n                    margin: 20,\n                    fontSize: \"22px\",\n                    width: \"-webkit-fill-available\",\n                    color: \"rgb(40,40,40)\",\n                    wordBreak: \"break-word\",\n                    overflowY: \"auto\",\n                    border: \"solid\",\n                  }}\n                  value={draftToHtml(\n                    convertToRaw(editorState.getCurrentContent())\n                  )}\n                ></textarea>\n              </Editor>\n            </div>\n          </BottomSheet>\n          <BottomSheet\n            open={remoteOpen}\n            onDismiss={() => setRemoteOpen(false)}\n            snapPoints={({ minHeight, maxHeight }) => [minHeight, maxHeight]}\n            scrollLocking={false}\n            header={\n              <div\n                style={{\n                  flexDirection: \"row\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <div\n                  style={{\n                    flexDirection: \"column\",\n                    display: \"flex\",\n                    alignSelf: \"center\",\n                    alignItems: \"flex-start\",\n                    marginLeft: 20,\n                  }}\n                >\n                  <div style={{ fontSize: \"25px\", lineHeight: \"40px\" }}>\n                    {selectedUser &&\n                      selectedUser.user.displayName + \"'s Notepad\"}\n                  </div>\n                  <div>{selectedUser && selectedUser.user.email}</div>\n                </div>\n                <div style={{ display: \"flex\" }}>\n                  <Paper\n                    elevation={0}\n                    className={classes.paper}\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      borderRadius: 22,\n                      marginRight: 20,\n                    }}\n                  >\n                    <img\n                      src={selectedUser && selectedUser.user.photoURL}\n                      alt=\"\"\n                      style={{\n                        width: \"50px\",\n                        height: \"50px\",\n                        borderRadius: 22,\n                      }}\n                    ></img>\n                  </Paper>\n                </div>\n              </div>\n            }\n          >\n            {\n              /* <p\n                className=\"prof-description\"\n                style={{\n                  height: \"30vh\",\n                  margin: 20,\n                  fontSize: \"22px\",\n                  width: \"-webkit-fill-available\",\n                  color: \"rgb(77, 77, 77)\",\n                  wordBreak: \"break-word\",\n                  overflowY: \"auto\",\n                }}\n              >\n                {selectedUser && selectedUser.user.profile}\n              </p> */\n              selectedUser && (\n                <div\n                  style={{\n                    height: \"30vh\",\n                    margin: 20,\n                    fontSize: \"22px\",\n                    width: \"-webkit-fill-available\",\n                    color: \"rgb(40,40,40)\",\n                    wordBreak: \"break-word\",\n                    overflowY: \"auto\",\n                  }}\n                  dangerouslySetInnerHTML={{\n                    __html: selectedUser.user.profile,\n                  }}\n                ></div>\n              )\n            }\n          </BottomSheet>\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              marginTop: isMobile ? \"2vh\" : \"3vh\",\n              overflow: \"scroll\",\n              marginBottom: isMobile ? 20 : 100,\n              maxHeight: \"65vh\",\n            }}\n          >\n            <div>\n              <div style={{ height: 50 }}></div>\n              <Participants\n                me={localUser}\n                users={remoteUsers}\n                setLocalOpen={(val: boolean) => setLocalOpen(val)}\n                setRemoteOpen={(val: boolean) => setRemoteOpen(val)}\n                setSelectedUser={(val: AgoraUserObject | undefined) => {\n                  if (val) {\n                    setSelectedUser(val);\n                  }\n                }}\n              />\n            </div>\n\n            <QRCodeDisplay channel={channel} />\n          </div>\n          {/* <div style={{ display: \"flex\", height: \"100px\", width: \"100%\" }}></div> */}\n          <div\n            style={{\n              display: \"flex\",\n              height: \"100%\",\n              width: \"100%\",\n              flex: 1,\n            }}\n          ></div>\n          <div className={classes.buttonGroup}>\n            <Button variant=\"outlined\" onClick={leaveMeeting}>\n              {\" \"}\n              Leave{\" \"}\n            </Button>\n            <div style={{ width: 80 }}></div>\n            <Button variant=\"contained\" color=\"secondary\" onClick={handleMute}>\n              {localUser?.muted ? \"Unmute\" : \"Mute\"}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ) : null;\n};\n\ntype ChannelParams = {\n  channelId: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: isMobile ? \"90%\" : \"50%\",\n    height: isMobile ? \"95%\" : \"100%\",\n    margin: \"auto\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    position: \"relative\",\n    //borderStyle: \"solid\"\n  },\n  title: {\n    textAlign: \"center\",\n    fontSize: isMobile ? \"7vh\" : \"10vh\",\n    marginTop: 0,\n    marginBottom: 0,\n    position: \"fixed\",\n    top: \"0px\",\n  },\n  participantGroup: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    //alignItems: \"center\",\n    flexWrap: \"wrap\",\n    flexDirection: \"row\",\n    overflow: \"scroll\",\n  },\n  qrCodeDisplayStyle: {\n    flexDirection: \"column\",\n    //width: isMobile ? \"100%\" : \"50%\",\n    justifyContent: \"flex-start\",\n    //justifyContent: \"space-around\",\n    alignItems: \"center\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    \"& > *\": {\n      margin: theme.spacing(2),\n      width: theme.spacing(14),\n      height: theme.spacing(10),\n    },\n  },\n  participant: {\n    //borderStyle:\"solid\",\n    flexDirection: \"column\",\n    //width: isMobile ? \"100%\" : \"50%\",\n    justifyContent: \"flex-start\",\n    //justifyContent: \"space-around\",\n    alignItems: \"center\",\n    display: \"flex\",\n    position: \"relative\",\n    flexWrap: \"wrap\",\n    \"& > *\": {\n      margin: theme.spacing(2),\n      width: isMobile ? theme.spacing(10) : theme.spacing(14),\n      height: isMobile ? theme.spacing(10) : theme.spacing(14),\n    },\n  },\n  mute: {\n    zIndex: 2,\n    width: 30,\n    height: 30,\n    borderRadius: \"50%\",\n    backgroundColor: \"white\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    boxShadow: theme.shadows[5],\n  },\n  editPicture: {\n    position: \"fixed\",\n    zIndex: 2,\n    width: 20,\n    height: 20,\n    borderRadius: \"50%\",\n    backgroundColor: \"white\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    boxShadow: theme.shadows[5],\n  },\n  label: {\n    height: \"2vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    display: \"flex\",\n    lineHeight: 1.2,\n\n    textAlign: \"center\",\n  },\n  paper: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 20,\n    //overflow: \"clip\",\n    position: \"relative\",\n  },\n  qrCodeStyle: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    overflow: \"clip\",\n    height: \"85px\",\n    width: \"85px\",\n  },\n  modal: {\n    position: \"absolute\",\n    width: isMobile ? \"70%\" : \"50%\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: `translate(-50%, -50%)`,\n    backgroundColor: theme.palette.background.paper,\n    //border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  buttonGroup: {\n    width: isMobile ? \"100%\" : \"50%\",\n    marginTop: \"1vh\",\n    //borderStyle: \"solid\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 40,\n    position: \"fixed\",\n    bottom: 0,\n  },\n}));\n\nexport { useStyles };\n\nexport default Call;\n","import io from \"socket.io-client\";\nimport events from \"./events\";\n\nconst socketURL =\n  process.env.NODE_ENV === \"development\" ? \"http://localhost:8000\" : \"/\";\nlet socket = io(socketURL);\nconst initSocket = () => {\n  socket.on(\"connect\", () => console.log(\"Connected\"));\n};\n\nexport { socket, initSocket };\n","import { CircularProgress } from \"@material-ui/core\";\n\nconst Loading = () => {\n  return (\n    <div\n      className=\"landing-container-1\"\n      style={{\n        position: \"absolute\",\n      }}\n    >\n      <CircularProgress size={100} />\n    </div>\n  );\n};\n\nexport default Loading;\n","import { useContext, useEffect, useRef, useState } from \"react\";\nimport useAgora from \"../hooks/useAgora\";\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport keys from \"../keys\";\nimport { RtmTokenBuilder, RtcRole, RtcTokenBuilder } from \"agora-access-token\";\nimport { useParams, useHistory, Prompt } from \"react-router-dom\";\nimport UserContext from \"../context/UserContext\";\nimport Call, { AgoraUserObject, UserObject } from \"../components/Call\";\nimport { socket } from \"../api/sockets/sockets\";\nimport events from \"../api/sockets/events\";\nimport Loading from \"../components/Loading\";\n\nconst client = AgoraRTC.createClient({ codec: \"h264\", mode: \"rtc\" });\n\nfunction convertFromAgoraUser(user: AgoraUserObject): UserObject {\n  const { audioTrack, ...rest } = user;\n  return rest;\n}\n\nconst CallPage = () => {\n  const user = useContext(UserContext)?.user;\n  const playSound = () => {\n    const audioElement = document.getElementsByClassName(\n      \"audio\"\n    )[0] as HTMLAudioElement;\n    if (audioElement) {\n      audioElement.play();\n    }\n  };\n\n  const [joinedOnce, setJoinedOnce] = useState(false);\n\n  const [localUser, setLocalUser] = useState<AgoraUserObject | undefined>(\n    undefined\n  );\n\n  const [remoteUsers, setRemoteUsers] = useState<AgoraUserObject[]>([]);\n\n  const {\n    localAudioTrack,\n    leave,\n    join,\n    joinState,\n    remoteUsers: remoteAgoraUsers,\n  } = useAgora(client, playSound);\n\n  const localAudioTrackRef = useRef(localAudioTrack);\n  const localUserRef = useRef(localUser);\n  const remoteAgoraUsersRef = useRef(remoteAgoraUsers);\n\n  useEffect(() => {\n    localAudioTrackRef.current = localAudioTrack;\n    localUserRef.current = localUser;\n    remoteAgoraUsersRef.current = remoteAgoraUsers;\n  });\n\n  const { channelId } = useParams<{ channelId: string }>();\n  const history = useHistory();\n\n  const [channel] = useState(channelId);\n  const [appid] = useState(keys.AGORA_APP_ID);\n  const [token] = useState(\n    RtcTokenBuilder.buildTokenWithUid(\n      keys.AGORA_APP_ID,\n      keys.AGORA_SECRET,\n      channelId,\n      0,\n      RtcRole.PUBLISHER,\n      Math.floor(Date.now() / 1000) + 3600\n    )\n  );\n\n  useEffect(() => {\n    if (localUser) {\n      console.log(\"emitting\");\n      socket.emit(events.UPDATE_USER, {\n        channel,\n        user: convertFromAgoraUser(localUser),\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [remoteAgoraUsers]);\n\n  const setRemoteUserState = ({ users }: { users: UserObject[] }) => {\n    console.log(\"receiving\");\n    const localUser = localUserRef.current;\n    const remoteAgoraUsers = remoteAgoraUsersRef.current;\n    console.log(users);\n    // console.log(localUser);\n    //console.log(remoteAgoraUsers);\n    // console.log(localAudioTrack);\n    // console.log(localAudioTrackRef.current);\n    // if (localUser) {\n    //   setLocalUser({ ...localUser, audioTrack: localAudioTrackRef.current });\n    // }\n    if (localUser && remoteAgoraUsers) {\n      const remoteUserList = users.map((remoteUser) => {\n        const audioTrack = remoteAgoraUsers.find((val) => {\n          return val.uid.toString() === remoteUser.uid;\n        })?.audioTrack;\n        return { ...remoteUser, audioTrack };\n      });\n\n      setRemoteUsers(\n        remoteUserList.filter((remoteUser) => {\n          return remoteUser.user.email !== localUser.user.email;\n        })\n      );\n    } else {\n      //console.log(\"no remote users\");\n    }\n  };\n\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      console.log(\"Connected to Socket \" + socket.id);\n    });\n\n    socket.on(events.UPDATE_USER, setRemoteUserState);\n    socket.on(events.LEAVE_CHANNEL, getReplaced);\n    socket.on(events.JOIN_CHANNEL, ({ user }: { user: UserObject }) => {\n      console.log(user);\n      setLocalUser({\n        ...user,\n        audioTrack: localAudioTrackRef.current,\n      });\n      setJoinedOnce(true);\n    });\n\n    return () => {\n      socket.emit(events.LEAVE_CHANNEL, {\n        channel,\n        user: localUser && convertFromAgoraUser(localUser),\n      });\n      leave();\n      socket.off(events.UPDATE_USER, setRemoteUserState);\n      //socket.disconnect();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    join(appid, channel, token);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (joinState && user) {\n      console.log(\"joined\");\n      const tmpUser: UserObject = {\n        user,\n        isHost: false,\n        muted: false,\n        uid: client.uid?.toString(),\n      };\n      socket.emit(events.JOIN_CHANNEL, { channel, user: tmpUser });\n      // setJoinedOnce(true);\n      console.log();\n      // setLocalUser({\n      //   user,\n      //   isHost: false,\n      //   muted: false,\n      //   audioTrack: localAudioTrack,\n      //   uid: client.uid?.toString(),\n      // });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [joinState, user]);\n\n  //   useEffect(() => {\n  //     console.log(localUser);\n  //   }, [localUser]);\n\n  /*EVERY TIME LOCAL USER STATE CHANGES, EMIT TO WS CONNECTION*/\n  useEffect(() => {\n    if (localUser && joinedOnce) {\n      console.log(localUser);\n      console.log(\"emitting!\");\n      socket.emit(events.UPDATE_USER, {\n        channel,\n        user: convertFromAgoraUser(localUser),\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [localUser]);\n\n  //   useEffect(() => {\n  //     //let interval;\n\n  //     const interval = setInterval(() => {\n  //       if (localUser) {\n  //         console.log(\"emitting\");\n  //         socket.emit(events.UPDATE_USER, {\n  //           channel,\n  //           user: convertFromAgoraUser(localUser),\n  //         });\n  //       }\n  //     }, 1000);\n\n  //     return () => clearInterval(interval);\n\n  //     // eslint-disable-next-line react-hooks/exhaustive-deps\n  //   }, []);\n\n  const leaveMeeting = () => {\n    //console.log(\"ass\");\n    leave();\n    socket.emit(events.LEAVE_CHANNEL, {\n      channel,\n      user: localUser && convertFromAgoraUser(localUser),\n    });\n    //socket.disconnect();\n    history.push(\"/\");\n  };\n\n  const getReplaced = () => {\n    leave();\n    //socket.disconnect();\n    history.push(\"/\");\n  };\n\n  console.log(\"AUDIO TRACK DEBUGGING\");\n  console.log(localUser);\n  console.log(remoteUsers);\n\n  return localUser ? (\n    <Call\n      channel={channel}\n      localUser={localUser}\n      localAudioTrack={localAudioTrack}\n      remoteUsers={remoteUsers}\n      leaveMeeting={leaveMeeting}\n      setLocalUser={setLocalUser}\n    />\n  ) : (\n    <Loading />\n  );\n};\n\nexport default CallPage;\n","import { useState, useEffect } from \"react\";\nimport AgoraRTC, {\n  IAgoraRTCClient,\n  IAgoraRTCRemoteUser,\n  MicrophoneAudioTrackInitConfig,\n  CameraVideoTrackInitConfig,\n  IMicrophoneAudioTrack,\n  ICameraVideoTrack,\n  ILocalVideoTrack,\n  ILocalAudioTrack,\n} from \"agora-rtc-sdk-ng\";\n\nexport default function useAgora(\n  client: IAgoraRTCClient | undefined,\n  playSound: Function\n): {\n  localAudioTrack: ILocalAudioTrack | undefined;\n  // localVideoTrack: ILocalVideoTrack | undefined,\n  joinState: boolean;\n  leave: Function;\n  join: Function;\n  remoteUsers: IAgoraRTCRemoteUser[];\n} {\n  // const [localVideoTrack, setLocalVideoTrack] = useState<ILocalVideoTrack | undefined>(undefined);\n  const [localAudioTrack, setLocalAudioTrack] = useState<\n    ILocalAudioTrack | undefined\n  >(undefined);\n\n  const [joinState, setJoinState] = useState(false);\n\n  const [remoteUsers, setRemoteUsers] = useState<IAgoraRTCRemoteUser[]>([]);\n\n  async function createLocalTracks(\n    audioConfig?: MicrophoneAudioTrackInitConfig\n  ): Promise<IMicrophoneAudioTrack> {\n    const microphoneTrack = await AgoraRTC.createMicrophoneAudioTrack(\n      audioConfig\n    );\n\n    setLocalAudioTrack(microphoneTrack);\n    //   setLocalVideoTrack(cameraTrack);\n    return microphoneTrack;\n  }\n\n  async function join(\n    appid: string,\n    channel: string,\n    token?: string,\n    uid?: string | number | null\n  ) {\n    if (!client) return;\n    const microphoneTrack = await createLocalTracks();\n\n    await client.join(appid, channel, token || null);\n    await client.publish([microphoneTrack]);\n\n    (window as any).client = client;\n    //  (window as any).videoTrack = cameraTrack;\n\n    setJoinState(true);\n  }\n\n  async function leave() {\n    if (localAudioTrack) {\n      localAudioTrack.stop();\n      localAudioTrack.close();\n    }\n    // if (localVideoTrack) {\n    //   localVideoTrack.stop();\n    //   localVideoTrack.close();\n    // }\n    setRemoteUsers([]);\n    setJoinState(false);\n    await client?.leave();\n  }\n\n  useEffect(() => {\n    if (!client) return;\n    setRemoteUsers(client.remoteUsers);\n\n    const handleUserPublished = async (\n      user: IAgoraRTCRemoteUser,\n      mediaType: \"audio\" | \"video\"\n    ) => {\n      await client.subscribe(user, mediaType);\n      // toggle rerender while state of remoteUsers changed.\n      setRemoteUsers((remoteUsers) => Array.from(client.remoteUsers));\n    };\n    const handleUserUnpublished = (user: IAgoraRTCRemoteUser) => {\n      setRemoteUsers((remoteUsers) => Array.from(client.remoteUsers));\n    };\n    const handleUserJoined = (user: IAgoraRTCRemoteUser) => {\n      playSound();\n      setRemoteUsers((remoteUsers) => Array.from(client.remoteUsers));\n    };\n    const handleUserLeft = (user: IAgoraRTCRemoteUser) => {\n      //console.log(''+ user.uid + 'left')\n      setRemoteUsers((remoteUsers) => Array.from(client.remoteUsers));\n    };\n    client.on(\"user-published\", handleUserPublished);\n    client.on(\"user-unpublished\", handleUserUnpublished);\n    client.on(\"user-joined\", handleUserJoined);\n    client.on(\"user-left\", handleUserLeft);\n\n    return () => {\n      client.off(\"user-published\", handleUserPublished);\n      client.off(\"user-unpublished\", handleUserUnpublished);\n      client.off(\"user-joined\", handleUserJoined);\n      client.off(\"user-left\", handleUserLeft);\n    };\n  }, [client]);\n\n  return {\n    localAudioTrack,\n    // localVideoTrack,\n    joinState,\n    leave,\n    join,\n    remoteUsers,\n  };\n}\n","import { useContext, useEffect } from \"react\";\nimport GoogleButton from \"react-google-button\";\nimport { signInWithGoogle } from \"../api/firebase\";\nimport UserContext from \"../context/UserContext\";\nimport keys from \"../keys\";\nimport { isMobile } from \"react-device-detect\";\nimport { ConfabTitleWithTagline, Footer } from \"./WaitlistPage\";\nimport { Typography } from \"@material-ui/core\";\nimport grey from \"@material-ui/core/colors/grey\";\nimport { useHistory } from \"react-router-dom\";\nimport { blue } from \"@material-ui/core/colors\";\n\nconst SignInPage = () => {\n  const { setUser, setLoading } = useContext(UserContext);\n\n  const signIn = () => {\n    signInWithGoogle().then((user) => {\n      console.log(user);\n      setUser(user);\n    });\n  };\n\n  return (\n    <div\n      className=\"landing-container-1\"\n      style={{ position: \"relative\", height: \"100vh\" }}\n    >\n      {/* <AppBar position=\"static\" color=\"transparent\" elevation={0}></AppBar> */}\n      <div\n        className=\"landing-container-2\"\n        style={{\n          height: isMobile ? \"80vh\" : \"70vh\",\n\n          width: isMobile ? \"95%\" : \"60%\",\n        }}\n      >\n        <ConfabTitleWithTagline />\n\n        <Typography\n          variant=\"body\"\n          style={{\n            color: grey[600],\n            //marginTop: \"1em\",\n            textAlign: \"center\",\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n          }}\n        >\n          <GoogleButton style={{ marginBottom: \"1.5vh\" }} onClick={signIn} />\n          Sign in with your work email\n        </Typography>\n\n        <Typography\n          variant=\"body\"\n          style={{\n            color: grey[400],\n            //marginTop: \"1em\",\n            textAlign: \"center\",\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            fontSize: isMobile ? 12 : 14,\n            maxWidth: isMobile ? \"100%\" : \"60%\",\n          }}\n        >\n          <div>\n            By clicking 'Sign In With Google', you acknowledge that you have\n            read and understood, and agree to Confab’s{\" \"}\n            <a href=\"/terms-of-service.html\" style={{ color: blue[600] }}>\n              Terms{\" \"}\n            </a>\n            and{\" \"}\n            <a href=\"/privacy-policy.html\" style={{ color: blue[600] }}>\n              Privacy Policy\n            </a>\n            .\n          </div>\n        </Typography>\n      </div>\n\n      <Footer\n        style={{\n          position: \"absolute\",\n          bottom: \"0vh\",\n          width: \"97%\",\n          marginLeft: \"1.5%\",\n        }}\n      />\n    </div>\n  );\n};\nexport default SignInPage;\n","const loadGoogleScript = () => {\n  // Loads the Google JavaScript Library\n  (function () {\n    const id = \"google-js\";\n    const src = \"https://apis.google.com/js/platform.js\"; // (Ref. 1)\n\n    // We have at least one script (React)\n    const firstJs = document.getElementsByTagName(\"script\")[0]; // (Ref. 2)\n\n    // Prevent script from loading twice\n    if (document.getElementById(id)) {\n      return;\n    } // (Ref. 3)\n    const js = document.createElement(\"script\"); // (Ref. 4)\n    js.id = id;\n    js.src = src;\n    js.onload = window.onGoogleScriptLoad; // (Ref. 5)\n    firstJs.parentNode.insertBefore(js, firstJs);\n  })();\n};\n\nexport default loadGoogleScript;\n","import loadGoogleScript from \"./loadGoogleScript\";\nimport keys from \"../keys\";\n\nconst loadGapiClient = (window) => {\n  window.onGoogleScriptLoad = () => {\n    const _gapi = window.gapi;\n\n    _gapi.load(\"client\", () => {\n      console.log(\"loaded client\");\n\n      _gapi.client.init(keys.GAPI_CLIENT);\n\n      // _gapi.client.load(\"auth2\", () => console.log(\"loaded auth\"));\n    });\n  };\n  loadGoogleScript();\n};\n\nexport default loadGapiClient;\n","import { useEffect, useState, useContext } from \"react\";\nimport UserContext from \"./context/UserContext\";\nimport { auth, getUser } from \"./api/firebase\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport {\n  createTheme,\n  ThemeProvider,\n  Backdrop,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport LoggedInPage from \"./components/LoggedInPage\";\nimport HomePage from \"./pages/HomePage\";\nimport WaitlistPage from \"./pages/WaitlistPage\";\nimport CallPage from \"./pages/CallPage\";\nimport SignInPage from \"./pages/SignInPage\";\nimport loadGapiClient from \"./utils/loadGapiClient\";\nimport \"./App.css\";\nimport Loading from \"./components/Loading\";\n\nfunction App() {\n  const [user, setUser] = useState<User | undefined>(undefined);\n  const [loading, setLoading] = useState(true);\n\n  const globals: UserContextInterface = {\n    user,\n    setUser,\n    loading,\n    setLoading,\n  };\n\n  useEffect(() => {\n    loadGapiClient(window);\n    //initSocket();\n  }, []);\n\n  useEffect(() => {\n    auth.onAuthStateChanged((activeUser) => {\n      if (activeUser) {\n        getUser(activeUser.email).then((user) => {\n          setUser(user);\n        });\n      }\n      setLoading(false);\n    });\n  }, []);\n\n  const theme = createTheme({\n    typography: {\n      // override Material UI default of Roboto\n      //fontFamily: '\"Roboto\", sans-serif',\n      fontFamily: '\"Inter\", sans-serif',\n    },\n  });\n\n  return (\n    <div>\n      <ThemeProvider theme={theme}>\n        <UserContext.Provider value={globals}>\n          {loading ? (\n            <Loading />\n          ) : (\n            <Router>\n              <Route\n                exact\n                path=\"/\"\n                render={(props) =>\n                  user ? (\n                    <LoggedInPage>\n                      <HomePage />\n                    </LoggedInPage>\n                  ) : (\n                    <WaitlistPage />\n                  )\n                }\n              />\n              <Route exact path=\"/login\">\n                {user ? <Redirect to=\"/\" /> : <SignInPage />}\n              </Route>\n              <Route exact path=\"/call/:channelId\">\n                {user ? <CallPage /> : <SignInPage />}\n              </Route>\n            </Router>\n          )}\n        </UserContext.Provider>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport interface User {\n  displayName: string;\n  email: string;\n  photoURL: string;\n  profile: string;\n}\n\nexport interface UserContextInterface {\n  user: User | undefined;\n  setUser: React.Dispatch<React.SetStateAction<User | undefined>>;\n  loading: boolean;\n  setLoading: React.Dispatch<React.SetStateAction<boolean>>;\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App.tsx\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","module.exports = {\n  IS_USER: \"IS_USER\",\n  NEW_USER: \"NEW_USER\",\n  INIT_CHATS: \"INIT_CHATS\",\n  LOGOUT: \"LOGOUT\",\n  MESSAGE_SEND: \"MESSAGE_SEND\",\n  TYPING: \"TYPING\",\n  P_MESSAGE_SEND: \"P_MESSAGE_SEND\",\n  P_TYPING: \"P_TYPING\",\n  CHECK_CHANNEL: \"CHECK_CHANNEL\",\n  CREATE_CHANNEL: \"CREATE_CHANNEL\",\n  JOIN_CHANNEL: \"JOIN_CHANNEL\",\n  UPDATE_USER: \"UPDATE_USER\",\n  LEAVE_CHANNEL: \"LEAVE_CHANNEL\",\n};\n"],"sourceRoot":""}